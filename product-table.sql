CREATE TABLE `llx_product` (
    `rowid` int(11) NOT NULL AUTO_INCREMENT,
    `ref` varchar(128) NOT NULL,
    `entity` int(11) NOT NULL DEFAULT 1,
    `ref_ext` varchar(128) DEFAULT NULL,
    `datec` datetime DEFAULT NULL,
    `tms` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
    `fk_parent` int(11) DEFAULT 0,
    `label` varchar(255) NOT NULL,
    `description` text DEFAULT NULL,
    `note_public` mediumtext DEFAULT NULL,
    `note` mediumtext DEFAULT NULL,
    `customcode` varchar(32) DEFAULT NULL,
    `fk_country` int(11) DEFAULT NULL,
    `fk_state` int(11) DEFAULT NULL,
    `price` double(24, 8) DEFAULT 0.00000000,
    `price_ttc` double(24, 8) DEFAULT 0.00000000,
    `price_min` double(24, 8) DEFAULT 0.00000000,
    `price_min_ttc` double(24, 8) DEFAULT 0.00000000,
    `price_base_type` varchar(3) DEFAULT 'HT',
    `price_label` varchar(255) DEFAULT NULL,
    `cost_price` double(24, 8) DEFAULT NULL,
    `default_vat_code` varchar(10) DEFAULT NULL,
    `tva_tx` double(7, 4) DEFAULT NULL,
    `recuperableonly` int(11) NOT NULL DEFAULT 0,
    `localtax1_tx` double(7, 4) DEFAULT 0.0000,
    `localtax1_type` varchar(10) NOT NULL DEFAULT '0',
    `localtax2_tx` double(7, 4) DEFAULT 0.0000,
    `localtax2_type` varchar(10) NOT NULL DEFAULT '0',
    `fk_user_author` int(11) DEFAULT NULL,
    `fk_user_modif` int(11) DEFAULT NULL,
    `tosell` tinyint(4) DEFAULT 1,
    `tobuy` tinyint(4) DEFAULT 1,
    `tobatch` tinyint(4) NOT NULL DEFAULT 0,
    `sell_or_eat_by_mandatory` tinyint(4) NOT NULL DEFAULT 0,
    `batch_mask` varchar(32) DEFAULT NULL,
    `fk_product_type` int(11) DEFAULT 0,
    `duration` varchar(6) DEFAULT NULL,
    `seuil_stock_alerte` float DEFAULT NULL,
    `url` varchar(255) DEFAULT NULL,
    `barcode` varchar(180) DEFAULT NULL,
    `fk_barcode_type` int(11) DEFAULT NULL,
    `accountancy_code_sell` varchar(32) DEFAULT NULL,
    `accountancy_code_sell_intra` varchar(32) DEFAULT NULL,
    `accountancy_code_sell_export` varchar(32) DEFAULT NULL,
    `accountancy_code_buy` varchar(32) DEFAULT NULL,
    `accountancy_code_buy_intra` varchar(32) DEFAULT NULL,
    `accountancy_code_buy_export` varchar(32) DEFAULT NULL,
    `partnumber` varchar(32) DEFAULT NULL,
    `net_measure` float DEFAULT NULL,
    `net_measure_units` tinyint(4) DEFAULT NULL,
    `weight` float DEFAULT NULL,
    `weight_units` tinyint(4) DEFAULT NULL,
    `length` float DEFAULT NULL,
    `length_units` tinyint(4) DEFAULT NULL,
    `width` float DEFAULT NULL,
    `width_units` tinyint(4) DEFAULT NULL,
    `height` float DEFAULT NULL,
    `height_units` tinyint(4) DEFAULT NULL,
    `surface` float DEFAULT NULL,
    `surface_units` tinyint(4) DEFAULT NULL,
    `volume` float DEFAULT NULL,
    `volume_units` tinyint(4) DEFAULT NULL,
    `stock` double DEFAULT NULL,
    `pmp` double(24, 8) NOT NULL DEFAULT 0.00000000,
    `fifo` double(24, 8) DEFAULT NULL,
    `lifo` double(24, 8) DEFAULT NULL,
    `fk_default_warehouse` int(11) DEFAULT NULL,
    `canvas` varchar(32) DEFAULT NULL,
    `finished` tinyint(4) DEFAULT NULL,
    `lifetime` int(11) DEFAULT NULL,
    `qc_frequency` int(11) DEFAULT NULL,
    `hidden` tinyint(4) DEFAULT 0,
    `import_key` varchar(14) DEFAULT NULL,
    `model_pdf` varchar(255) DEFAULT NULL,
    `fk_price_expression` int(11) DEFAULT NULL,
    `desiredstock` float DEFAULT 0,
    `fk_unit` int(11) DEFAULT NULL,
    `price_autogen` tinyint(4) DEFAULT 0,
    `fk_project` int(11) DEFAULT NULL,
    `mandatory_period` tinyint(4) DEFAULT 0,
    `fk_default_bom` int(11) DEFAULT NULL,
    `fk_default_workstation` int(11) DEFAULT NULL,
    `stockable_product` int(11) NOT NULL DEFAULT 1,
    `last_main_doc` varchar(255) DEFAULT NULL,
    PRIMARY KEY (`rowid`),
    UNIQUE KEY `uk_product_ref` (`ref`, `entity`),
    UNIQUE KEY `uk_product_barcode` (
        `barcode`,
        `fk_barcode_type`,
        `entity`
    ),
    KEY `idx_product_label` (`label`),
    KEY `idx_product_barcode` (`barcode`),
    KEY `idx_product_import_key` (`import_key`),
    KEY `idx_product_seuil_stock_alerte` (`seuil_stock_alerte`),
    KEY `idx_product_fk_country` (`fk_country`),
    KEY `idx_product_fk_user_author` (`fk_user_author`),
    KEY `idx_product_fk_barcode_type` (`fk_barcode_type`),
    KEY `idx_product_fk_project` (`fk_project`),
    KEY `fk_product_fk_unit` (`fk_unit`),
    KEY `fk_product_finished` (`finished`),
    KEY `fk_product_default_warehouse` (`fk_default_warehouse`),
    KEY `idx_product_entity_fk_product_type` (`entity`, `fk_product_type`),
    CONSTRAINT `fk_product_barcode_type` FOREIGN KEY (`fk_barcode_type`) REFERENCES `llx_c_barcode_type` (`rowid`),
    CONSTRAINT `fk_product_finished` FOREIGN KEY (`finished`) REFERENCES `llx_c_product_nature` (`code`),
    CONSTRAINT `fk_product_fk_country` FOREIGN KEY (`fk_country`) REFERENCES `llx_c_country` (`rowid`),
    CONSTRAINT `fk_product_fk_unit` FOREIGN KEY (`fk_unit`) REFERENCES `llx_c_units` (`rowid`)
)

